<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>05-列表渲染</title>
    </head>
    <body>
        <script src="vue.min.js"></script>
        <script src="vue-router.min.js"></script>
        <script src="axios.min.js"></script>
        <!-- id标识vue作用的范围 -->
        <div id="app">
            <!-- 使用自定义标签（组件） -->
            <Navbar></Navbar>
            <!-- 2、遍历数据列表 -->
            <table border="1">
                <!-- <tr v-for="item in userList"></tr> -->
                <tr v-for="(item, index) in userList">
                    <td>{{index}}</td>
                    <td>{{item.id}}</td>
                    <td>{{item.username}}</td>
                </tr>
            </table>
            <!-- 路由  -->
            <h1>Hello App!</h1>
            <p>
                <!-- 使用 router-link 组件来导航. -->
                <!-- 通过传入 `to` 属性指定链接. -->
                <!-- <router-link> 默认会被渲染成一个 `<a>` 标签 -->
                <router-link to="/">首页</router-link>
                <router-link to="/student">会员管理</router-link>
                <router-link to="/teacher">讲师管理</router-link>
            </p>
            <!-- 路由出口 -->
            <!-- 路由匹配到的组件将渲染在这里 -->
            <router-view></router-view>

            <table border="1">
                <tr>
                    <td>id</td>
                    <td>姓名</td>
                    <td>age</td>
                </tr>
                <tr v-for="item,id in memberList">
                    <td>{{id}}</td>
                    <td>{{item.name}}</td>
                    <td>{{item.age}}</td>
                    </td>
                </tr>
            </table>
        </div>

        <script>
            // 1. 定义（路由）组件。
            // 可以从其他文件 import 进来
            const Welcome = {template: '<div>欢迎</div>'}
            const Student = {template: '<div>student list</div>'}
            const Teacher = {template: '<div>teacher list</div>'}
            // 2. 定义路由
            // 每个路由应该映射一个组件。
            const routes = [
                {path: '/', redirect: '/welcome'}, //设置默认指向的路径
                {path: '/welcome', component: Welcome},
                {path: '/student', component: Student},
                {path: '/teacher', component: Teacher}
            ]
            // 3. 创建 router 实例，然后传 `routes` 配置
            const router = new VueRouter({
                routes // （缩写）相当于 routes: routes
            })
            // 4. 创建和挂载根实例。
            // 从而让整个应用都有路由功能
            // 创建一个vue对象
            const app = new Vue({
                el: '#app',//绑定vue作用的范围
                //routes
                router,
                data: {
                    searchMap: {
                        keyWord: '尚硅谷'
                    },
                    ok: false,
                    userList: [
                        {id: 1, username: 'helen'},
                        {id: 2, username: 'peter'},
                        {id: 3, username: 'andy'}
                    ],
                    // axios
                    memberList: []//数组
                },
                created() { // 在渲染之前执行
                    console.log("created....")
                    // 调用方法
                    this.getList()
                },
                mounted() { // 在渲染之后执行
                    console.log("mounted....")
                },
                methods: {
                    search() {
                        console.log('search')
                    },
                    getList(id) {
                        //vm = this
                        axios.get('data.json')
                            // 请求成功调用，数据
                            .then(response => {
                                console.log(response)
                                this.memberList = response.data.data.items
                            })
                            // 请求失败调用
                            .catch(error => {
                                console.log(error)
                            })
                    }
                },
                // 定义局部组件，这里可以定义多个局部组件
                components: {
                    //组件的名字
                    'Navbar': {
                        //组件的内容
                        template: '<ul><li>首页</li><li>学员管理</li></ul>'
                    }
                }
            })
            // 现在，应用已经启动了！
        </script>
    </body>
</html>
